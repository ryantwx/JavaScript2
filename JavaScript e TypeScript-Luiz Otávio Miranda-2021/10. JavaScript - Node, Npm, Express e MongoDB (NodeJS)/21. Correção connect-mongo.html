<p>Devido a uma refatoração no código do "connect-mongo", infelizmente a conexão não funciona mais com o código abaixo:</p><pre class="prettyprint linenums">const MongoStore = require('connect-mongo')(session);
</pre><p>Por favor, altere o código anterior para o seguinte:</p><pre class="prettyprint linenums">const MongoStore = require('connect-mongo');</pre><p>Na configuração da seção, altere a linha store a seguir:</p><pre class="prettyprint linenums">{
    // ...
    store: new MongoStore({ mongooseConnection: mongoose.connection }),
    // ...
}</pre><p>Para a linha store abaixo:</p><pre class="prettyprint linenums">{
    // ...
    store: MongoStore.create({ mongoUrl: process.env.CONNECTIONSTRING }),
    // ...
}</pre><p>Lembrando que <code>process.env.CONNECTIONSTRING</code> é a sua URL de conexão do MongoDB.</p><p>Se precisar de mais informações, de uma olhada na documentação em <a href="https://www.npmjs.com/package/connect-mongo#connection-to-mongodb" rel="noopener noreferrer" target="_blank">connect-mongo</a>.</p><p>Não se esqueça, eu mantenho o código desse curso atualizado, mas pode passar algo despercebido. O código para o MongoStore (server.js) está em <a href="https://github.com/luizomf/curso-js/blob/master/projetoagenda/server.js" rel="noopener noreferrer" target="_blank">https://github.com/luizomf/curso-js/blob/master/projetoagenda/server.js</a>.</p>